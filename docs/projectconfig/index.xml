<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Projectconfigs on Edward Docs</title>
    <link>http://engblog.yext.com/edward/projectconfig/index.xml</link>
    <description>Recent content in Projectconfigs on Edward Docs</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Released under the MIT license</copyright>
    <lastBuildDate>Wed, 01 Feb 2017 17:24:55 -0500</lastBuildDate>
    <atom:link href="http://engblog.yext.com/edward/projectconfig/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Project Configuration</title>
      <link>http://engblog.yext.com/edward/projectconfig/</link>
      <pubDate>Wed, 01 Feb 2017 17:24:55 -0500</pubDate>
      
      <guid>http://engblog.yext.com/edward/projectconfig/</guid>
      <description>

&lt;h2 id=&#34;edward-json&#34;&gt;edward.json&lt;/h2&gt;

&lt;p&gt;The &lt;em&gt;edward.json&lt;/em&gt; file defines the services and groups that can be managed by Edward.&lt;/p&gt;

&lt;p&gt;Edward will look for an &lt;em&gt;edward.json&lt;/em&gt; file in the current working directory, and if not found there,
it will look for &lt;em&gt;edward.json&lt;/em&gt; in every parent directory to the root.&lt;/p&gt;

&lt;p&gt;If no config file can be found, Edward will exit with an error and print usage information.&lt;/p&gt;

&lt;p&gt;You can override this behavior with the &lt;code&gt;--config&lt;/code&gt; or &lt;code&gt;-c&lt;/code&gt; flag:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ edward -c path/to/alternative.json list
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;structure&#34;&gt;Structure&lt;/h2&gt;

&lt;p&gt;An &lt;em&gt;edward.json&lt;/em&gt; file at its core is a JSON document, containing an object with three array attributes:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;imports&amp;quot;: [],
  &amp;quot;groups&amp;quot;: [],
  &amp;quot;services&amp;quot;: []
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These attributes are all optional.&lt;/p&gt;

&lt;h2 id=&#34;services&#34;&gt;Services&lt;/h2&gt;

&lt;p&gt;A basic service consists of a &lt;em&gt;name&lt;/em&gt;, a &lt;em&gt;path&lt;/em&gt; in which to run the build and launch commands, and &lt;em&gt;commands&lt;/em&gt;
to perform the build and launch steps:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    &amp;quot;path&amp;quot;: &amp;quot;path/to/myservice&amp;quot;,
    &amp;quot;commands&amp;quot;: {
        &amp;quot;build&amp;quot;: &amp;quot;make install&amp;quot;,
        &amp;quot;launch&amp;quot;: &amp;quot;myservice&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The service &lt;em&gt;name&lt;/em&gt; is the name you will use to identify this service when calling Edward commands.&lt;/p&gt;

&lt;div class=&#34;admonition warning&#34;&gt;
&lt;p class=&#34;admonition-title&#34;&gt;Names must be unique&lt;/p&gt;
&lt;p&gt;Service and group names must be unique within your Edward config. If duplicates are found, Edward will
exit with an error.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;The &lt;em&gt;path&lt;/em&gt; and each of the &lt;em&gt;commands&lt;/em&gt; are optional. If no path is specified, Edward will run the commands in the current working directory. If a build command is omitted, only the launch script will be executed, and vice versa. This allows you to run pre-flight build steps common to many services, or start third-party applications you don&amp;rsquo;t need to build.&lt;/p&gt;

&lt;p&gt;You can use environment variables in the path and commands:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    &amp;quot;path&amp;quot;: &amp;quot;$HOME/src/myservice&amp;quot;,
    &amp;quot;commands&amp;quot;: {
        &amp;quot;launch&amp;quot;: &amp;quot;myservice -key $MY_KEY&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;However, you cannot use shell-specific constructs like piping (&lt;code&gt;|&lt;/code&gt;) or redirection (&lt;code&gt;&amp;gt;&lt;/code&gt;). For complex
build and launch operations, we recommend consolidating multiple commands into a separate script file.&lt;/p&gt;

&lt;h3 id=&#34;custom-stop-scripts&#34;&gt;Custom Stop Scripts&lt;/h3&gt;

&lt;p&gt;If you need to run a specific command to stop a service, you can add a &lt;em&gt;stop&lt;/em&gt; command to the service definition:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    &amp;quot;commands&amp;quot;: {
        &amp;quot;launch&amp;quot;: &amp;quot;myservice up&amp;quot;,
        &amp;quot;stop&amp;quot;: &amp;quot;myservice down&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If this command fails, Edward will attempt to send a kill signal to the running service.&lt;/p&gt;

&lt;h3 id=&#34;detecting-successful-launch&#34;&gt;Detecting Successful Launch&lt;/h3&gt;

&lt;p&gt;When Edward starts a service, it will confirm that the service has started successfully before proceeding. By default, Edward will consider a service to have started if it is listening on one or more ports.&lt;/p&gt;

&lt;p&gt;You can override this behavior by setting the &lt;em&gt;launch_checks&lt;/em&gt; attribute for the service.&lt;/p&gt;

&lt;p&gt;If your service will output a known piece of text to the console when it has finished startup, you can specify a &lt;em&gt;log_text&lt;/em&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;launch_checks&amp;quot;: {
      &amp;quot;log_text&amp;quot;: &amp;quot;Finished startup&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In this case, once the text &amp;ldquo;Finished startup&amp;rdquo; appears in the console lot, Edward will deem the service to have started successfully.&lt;/p&gt;

&lt;p&gt;Alternatively, you can specify a set of ports:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;launch_checks&amp;quot;: {
      &amp;quot;ports&amp;quot;: [8080, 8081]
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And Edward will wait for all the listed ports to be open before considering the service started. When ports are specified, the process that opens them will not be taken into account.&lt;/p&gt;

&lt;h3 id=&#34;environment-variables&#34;&gt;Environment Variables&lt;/h3&gt;

&lt;p&gt;To specify environment variables to be passed to a service, you can add the &lt;em&gt;env&lt;/em&gt; attribute, which is an array of environment variables in the form &lt;code&gt;KEY=VALUE&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;env&amp;quot;: [
      &amp;quot;ENV_VAR=value&amp;quot;
    ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;platform-specific-services&#34;&gt;Platform-Specific Services&lt;/h3&gt;

&lt;p&gt;Some services need different configuration for different platforms. To make a service platform-specific, set the &lt;em&gt;platform&lt;/em&gt; attribute.&lt;/p&gt;

&lt;p&gt;It is permitted to have multiple services with the same name, provided they have different platforms.&lt;/p&gt;

&lt;p&gt;The below example will create two instances of &lt;em&gt;myservice&lt;/em&gt;: one for Mac OS (darwin) and one for Linux:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;platform&amp;quot;: &amp;quot;darwin&amp;quot;
},
{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;platform&amp;quot;: &amp;quot;linux&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;warming-up-services&#34;&gt;&amp;ldquo;Warming Up&amp;rdquo; Services&lt;/h3&gt;

&lt;p&gt;Some services may do a portion of their setup on the first request they receive. To cut down on waiting
time when working with such services, you can configure Edward to make a request to a URL after starting a service.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
    &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
    ...
    &amp;quot;warmup&amp;quot;: {
      &amp;quot;url&amp;quot;: &amp;quot;http://localhost:8080&amp;quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Requests to these URLs will happen in the background, and will not delay the starting of other services.&lt;/p&gt;

&lt;h3 id=&#34;requiring-sudo&#34;&gt;Requiring Sudo&lt;/h3&gt;

&lt;p&gt;If a service needs sudo to run, it will need to be marked appropriately:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;name&amp;quot;: &amp;quot;myservice&amp;quot;,
  &amp;quot;requiresSudo&amp;quot;: true
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If any service to be started/stopped/restarted requires sudo, Edward will trigger a prompt for the user&amp;rsquo;s password.
This prompt is triggered through scripting, Edward itself will not have access to your password.&lt;/p&gt;

&lt;h2 id=&#34;groups&#34;&gt;Groups&lt;/h2&gt;

&lt;p&gt;The &lt;em&gt;groups&lt;/em&gt; array contains a list of group objects, each of which have a name and a list of children.
A group&amp;rsquo;s children can be either services, or other groups.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;name&amp;quot;: &amp;quot;mygroup&amp;quot;,
  &amp;quot;children&amp;quot;: [&amp;quot;childgroup&amp;quot;, &amp;quot;childservice&amp;quot;]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The above example specifies a group called &lt;em&gt;mygroup&lt;/em&gt; with two children, &lt;em&gt;childgroup&lt;/em&gt; and &lt;em&gt;childservice&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&#34;imports&#34;&gt;Imports&lt;/h2&gt;

&lt;p&gt;The &lt;em&gt;imports&lt;/em&gt; array is a list of other config files to be imported into this one:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;&amp;quot;imports&amp;quot;: [&amp;quot;import1.json&amp;quot;, &amp;quot;path/to/import2.json&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The paths to imports are relative to the parent &lt;code&gt;edward.json&lt;/code&gt; file. Imported config files may also import other
config files.&lt;/p&gt;

&lt;p&gt;The combined configuration is validated after all imports have been loaded, so a group in one file may have as a child a service from another file, provided they are connected by an import in some way.&lt;/p&gt;

&lt;h2 id=&#34;versioning&#34;&gt;Versioning&lt;/h2&gt;

&lt;p&gt;If you are using features from a new version of Edward, and want to make sure that your config file can only be used by that version or higher, you can specify the &lt;em&gt;edwardVersion&lt;/em&gt; setting in your config file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;edwardVersion&amp;quot;: &amp;quot;1.6.0&amp;quot;,
  &amp;quot;imports&amp;quot;: [],
  &amp;quot;groups&amp;quot;: [],
  &amp;quot;services&amp;quot;: []
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will require that Edward version 1.6.0 or higher is installed in order to use your config file.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>